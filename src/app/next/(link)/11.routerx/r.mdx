import Preview from '@/components/Preview'
import Header from './demo01/header'



## Table of contents


## 路由的重要性

通常情况下，我们经常接触到的前端项目，无论多复杂，都是由路由组成。所以呢，无论一个项目页面再多，只要我们彻底掌握了该项目的路由方案，**就能够直接把项目的复杂度，从项目级别，降低到页面级别。**

因此，一个好的路由方案对于项目来说至关重要。他可以有效的提高项目的可维护性。

从学习的角度而言，只要我们掌握了路由方案，基本上就可以极大的降低该项目的学习成本。

网页由于在 PC 端中呈现，页面可展示内容非常多，因此路由的设计和组成通常情况下都比移动端更加复杂。那么，在这种情况之下，无论是哪种路由方案，都应该遵循一套统一的设计原则，让页面和代码的可读性变得更高。我们接下来，需要首先掌握这一套原则，能有效提高我们掌握具体路由方案的学习效率。

## 与组件化结合的语义化

在浏览器的 URL 中，包含了两种路由方案，history router 与 hash router，他们在技术方案和监听方案上有一些差别。但是在设计原则上基本上是一致的。关于他们的基础知识这里不会详细讲解，大家可以自行搜索资料学习

```ts
// history router
usehook.cn/base/suspense

// hash router
usehook.cn#/base/suspense
```

由于更加简洁、并且能够更容易与服务端路由发生交互，因此目前使用比较多的都是 `history router`.

我们通常说的路由通常由多个单词加上斜杠组成，它紧跟在域名之后。`xxx.com/word1/word2/word3`

域名后面的每一个单词都应该具备具体的语义。通常有两种情况。

第一种情况表示**分类**。例如，一个后台 `ERP` 系统中，包含了大量的页面，针对这些页面，我们按照业务模块对其进行分类，这样，就能得到如下的路径

```js
// 用户管理模块
erp.kx2.com/user

// 人事模块
erp.kx2.com/personnel

// 销售模块
erp.kx2.com/sales

// 订单模块
erp.kx2.com/orders

...
```

反面的案例就是有的开发者为了表达更具体的语义，有的模块用一个单词，有的模块用两个单词。

```js
// 销售模块
erp.kx2.com/sales

// 订单管理模块
erp.kx2.com/orders/management
```

第二种情况表示 **UI 内容**，也就是说，每一个单词，都应该与具体的某一个 UI 组件保持对应关系。

这里我们以人事模块举例

```js
// 人事模块
// 员工列表 -> 对应 Staff 页面组件
erp.kx2.com/personnel/staffs

// 组织结构 -> 对应 Org 页面组件
erp.kx2.com/personnel/org

// 岗位管理 -> 对应 Position 页面组件
erp.kx2.com/personnel/position
```

由于每一个单词都对应具体的某一个 UI 组件，因此我们不能随意新增多个单词来表达一个页面。例如下面这种就是反面案例

```js
// 组织结构 -> 对应 Org 页面组件
erp.kx2.com/personnel/org/structure
```

在符合这两个标准的前提之下，我们还需要满足所见即所得。

## 所见即所得

路由的设计，还需要符合 UI 的组合形式，达到所见即所得的程度。我们列举一个比较常规的例子。

通常在 ERP 等后台管理系统中，点击列表页中的某一项，可以进入到新的详情页。假如，列表页的路由为

```js
// 员工列表 -> 对应 Staff 页面组件
erp.kx2.com/personnel/staffs
```

此时的 UI 交互方案是，详情页出来之后，列表也会被整个替换，所以，这个时候，一个非常常见的反面案例就是这样设计详情页的路由

```js
// 员工详情 -> 对应具体某一个员工详情页组件
erp.kx2.com/personnel/staffs/detail/124231
```

为什么这是反面案例呢，因为你详情页的路由设计，是在符合访问路径的规则之下设计而来的。但是这种规则设计并不完全合理，因为某一个详情页也有可能是从其他地方访问过来。另外一方面，路由的设计与页面 UI 组件的真实组合情况也不匹配。

因此，如果我们要符合所见即所得，当详情页的出现，替换掉列表页之后，一个比较合理的详情页设计，应该是这样的

```js
// 员工详情 -> 对应具体某一个员工详情页组件
erp.kx2.com/personnel/staff_detail_124231

// 或者通过参数传递动态 id，这是更为常见的做法
erp.kx2.com/personnel/staff_detail?id=124231
```

这是因为在 UI 层面，列表页和详情页是一个覆盖的关系，说明他们是属于同级关系。因此这一点也应该体现在路由设计上。


从另外一个角度来说，两个路由之间，如果他们的前缀是一样的，那么也就意味着，在 UI 上，这两个路由存在共同的组件组成。例如下面这两个路径，在 UI 组件上面，他们相互切换时，只会切换 `org` 和 `position`，前面的页面 UI 部分则不应该改变。

```js
// 组织结构 -> 对应 Org 页面组件
erp.kx2.com/personnel/org

// 岗位管理 -> 对应 Position 页面组件
erp.kx2.com/personnel/position
```

这里，我们也写了一个完整的案例来演示这种共享。大家点击下面的按钮，并且观察一下路由的变化，就能感受出来。

变化的部分应该包括 _`['/', 'features', 'reviews', 'pricing', 'faqs']`_，其他部分，由于路由没有发生变化，所以 UI 也不会发生变化。

<Preview><Header /></Preview>
